<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Opencv 开源项目 | Emil`s Blog</title><meta name="keywords" content="python,opencv"><meta name="author" content="Emil"><meta name="copyright" content="Emil"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><meta name="description" content="Roujack&#x2F;mathAI  一个拍照做题程序。输入一张包含数学计算题的图片，输出识别出的数学计算式以及计算结果。This is a mathematic expression recognition project.  mathAI 一个拍照做题程序。输入一张包含数学计算题的图片，输出识别出的数学计算式以及计算结果。 请查看系统文档说明来运行程序。注意，这是一个半开源的项目，目前上传的版本只"><meta property="og:type" content="article"><meta property="og:title" content="Opencv 开源项目"><meta property="og:url" content="https://blog.hvnobug.com/post/opencv-opensource.html"><meta property="og:site_name" content="Emil&#96;s Blog"><meta property="og:description" content="Roujack&#x2F;mathAI  一个拍照做题程序。输入一张包含数学计算题的图片，输出识别出的数学计算式以及计算结果。This is a mathematic expression recognition project.  mathAI 一个拍照做题程序。输入一张包含数学计算题的图片，输出识别出的数学计算式以及计算结果。 请查看系统文档说明来运行程序。注意，这是一个半开源的项目，目前上传的版本只"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/hvnobug/assets/blog/album/original-anime/16.png"><meta property="article:published_time" content="2019-12-20T05:11:08.000Z"><meta property="article:modified_time" content="2021-04-29T03:35:56.980Z"><meta property="article:author" content="Emil"><meta property="article:tag" content="python"><meta property="article:tag" content="opencv"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://cdn.jsdelivr.net/gh/hvnobug/assets/blog/album/original-anime/16.png"><link rel="shortcut icon" href="https://cdn.jsdelivr.net/gh/hvnobug/assets/common/favicon.ico"><link rel="canonical" href="https://blog.hvnobug.com/post/opencv-opensource"><link rel="preconnect" href="//cdn.jsdelivr.net"><link rel="preconnect" href="//www.google-analytics.com" crossorigin="crossorigin"><link rel="preconnect" href="//hm.baidu.com"><link rel="preconnect" href="//fonts.googleapis.com" crossorigin="crossorigin"><link rel="preconnect" href="//busuanzi.ibruce.info"><link rel="manifest" href="/pwa/manifest.json"><meta name="msapplication-TileColor" content="#fff"><link rel="apple-touch-icon" sizes="180x180" href="/pwa/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/pwa/32.png"><link rel="icon" type="image/png" sizes="16x16" href="/pwa/16.png"><link rel="mask-icon" href="/pwa/safari-pinned-tab.svg" color="#5bbad5"><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css"><script>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?39cbf1602bb584a9c817fbe7b061c842";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script><script async src="https://www.googletagmanager.com/gtag/js?id=UA-153501439-1"></script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-153501439-1")</script><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web&amp;display=swap"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  ClickShowText: undefined,
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#49b1f5","bgDark":"#121212","position":"bottom-left"},
  justifiedGallery: {
    js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
    css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isanchor: true
};

var saveToLocal = {
  set: function setWithExpiry(key, value, ttl) {
    const now = new Date()
    const expiryDay = ttl * 86400000
    const item = {
      value: value,
      expiry: now.getTime() + expiryDay,
    }
    localStorage.setItem(key, JSON.stringify(item))
  },

  get: function getWithExpiry(key) {
    const itemStr = localStorage.getItem(key)

    if (!itemStr) {
      return undefined
    }
    const item = JSON.parse(itemStr)
    const now = new Date()

    if (now.getTime() > item.expiry) {
      localStorage.removeItem(key)
      return undefined
    }
    return item.value
  }
}</script><script id="config_change">var GLOBAL_CONFIG_SITE={isPost:!0,isHome:!1,isHighlightShrink:!1,isToc:!0,postUpdate:"2021-04-29 11:35:56"}</script><noscript><style type="text/css">#nav{opacity:1}.justified-gallery img{opacity:1}#post-meta time,#recent-posts time{display:inline!important}</style></noscript><script>(function () {  window.activateDarkMode = function () {
    document.documentElement.setAttribute('data-theme', 'dark')
    if (document.querySelector('meta[name="theme-color"]') !== null) {
      document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
    }
  }
  window.activateLightMode = function () {
    document.documentElement.setAttribute('data-theme', 'light')
   if (document.querySelector('meta[name="theme-color"]') !== null) {
      document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
    }
  }
  const autoChangeMode = 'false'
  const t = saveToLocal.get('theme')
  if (autoChangeMode === '1') {
    const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
    const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
    const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
    const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified
    if (t === undefined) {
      if (isLightMode) activateLightMode()
      else if (isDarkMode) activateDarkMode()
      else if (isNotSpecified || hasNoSupport) {
        const now = new Date()
        const hour = now.getHours()
        const isNight = hour <= 6 || hour >= 18
        isNight ? activateDarkMode() : activateLightMode()
      }
      window.matchMedia('(prefers-color-scheme: dark)').addListener(function (e) {
        if (saveToLocal.get('theme') === undefined) {
          e.matches ? activateDarkMode() : activateLightMode()
        }
      })
    } else if (t === 'light') activateLightMode()
    else activateDarkMode()
  } else if (autoChangeMode === '2') {
    const now = new Date()
    const hour = now.getHours()
    const isNight = hour <= 6 || hour >= 18
    if (t === undefined) isNight ? activateDarkMode() : activateLightMode()
    else if (t === 'light') activateLightMode()
    else activateDarkMode()
  } else {
    if (t === 'dark') activateDarkMode()
    else if (t === 'light') activateLightMode()
  }const asideStatus = saveToLocal.get('aside-status')
if (asideStatus !== undefined) {
   if (asideStatus === 'hide') {
     document.documentElement.classList.add('hide-aside')
   } else {
     document.documentElement.classList.remove('hide-aside')
   }
}})()</script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css"><style type="text/css">.app-refresh{position:fixed;top:-2.2rem;left:0;right:0;z-index:99999;padding:0 1rem;font-size:15px;height:2.2rem;transition:all .3s ease}.app-refresh-wrap{display:flex;color:#fff;height:100%;align-items:center;justify-content:center}.app-refresh-wrap a{color:#fff;text-decoration:underline;cursor:pointer}</style><style type="text/css">.app-refresh{position:fixed;top:-2.2rem;left:0;right:0;z-index:99999;padding:0 1rem;font-size:15px;height:2.2rem;transition:all .3s ease}.app-refresh-wrap{display:flex;color:#fff;height:100%;align-items:center;justify-content:center}.app-refresh-wrap span{color:#fff;text-decoration:underline;cursor:pointer}.snackbar-pos.bottom-left{bottom:70px}</style><meta name="generator" content="Hexo 5.4.0"><link rel="alternate" href="/atom.xml" title="Emil`s Blog" type="application/atom+xml"></head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">加载中...</div></div></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="author-avatar"><img class="avatar-img" data-lazy-src="https://cdn.jsdelivr.net/gh/hvnobug/assets/common/avatar.png" onerror='onerror=null,src="/img/friend_404.gif"' alt="avatar"></div><div class="site-data"><div class="data-item is-center"><div class="data-item-link"><a href="/archives/"><div class="headline">文章</div><div class="length-num">56</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/tags/"><div class="headline">标签</div><div class="length-num">34</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/categories/"><div class="headline">分类</div><div class="length-num">32</div></a></div></div></div><hr><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fa fa-sitemap"></i><span> 统计</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 归档</span></a></li><li><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></li><li><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> 分类</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fa fa-list"></i><span> 媒体</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/album/"><i class="fa-fw fa fa-image"></i><span> 相册</span></a></li><li><a class="site-page" href="/books/"><i class="fa-fw fa fa-book"></i><span> 书籍</span></a></li><li><a class="site-page" href="/movies/"><i class="fa-fw fa fa-film"></i><span> 电影</span></a></li><li><a class="site-page" href="/games/"><i class="fa-fw fa fa-gamepad"></i><span> 游戏</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/friends/"><i class="fa-fw fa fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> 关于</span></a></div><div class="menus_item"><a class="site-page" href="/nav/"><i class="fa-fw fa fa-map"></i><span> 网址导航</span></a></div></div></div></div><div id="body-wrap"><header class="post-bg" id="page-header" style="background-image:url(https://cdn.jsdelivr.net/gh/hvnobug/assets/blog/album/original-anime/16.png)"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">Emil`s Blog</a></span><span id="menus"><div id="search_button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fa fa-sitemap"></i><span> 统计</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 归档</span></a></li><li><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></li><li><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> 分类</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fa fa-list"></i><span> 媒体</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/album/"><i class="fa-fw fa fa-image"></i><span> 相册</span></a></li><li><a class="site-page" href="/books/"><i class="fa-fw fa fa-book"></i><span> 书籍</span></a></li><li><a class="site-page" href="/movies/"><i class="fa-fw fa fa-film"></i><span> 电影</span></a></li><li><a class="site-page" href="/games/"><i class="fa-fw fa fa-gamepad"></i><span> 游戏</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/friends/"><i class="fa-fw fa fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> 关于</span></a></div><div class="menus_item"><a class="site-page" href="/nav/"><i class="fa-fw fa fa-map"></i><span> 网址导航</span></a></div></div><span class="close" id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></span></span></nav><div id="post-info"><h1 class="post-title">Opencv 开源项目</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2019-12-20T05:11:08.000Z" title="发表于 2019-12-20 13:11:08">2019-12-20</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2021-04-29T03:35:56.980Z" title="更新于 2021-04-29 11:35:56">2021-04-29</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/python/">python</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">4.1k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>17分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h2 id="roujackmathai"><a class="markdownIt-Anchor" href="#roujackmathai"></a> Roujack/mathAI</h2><blockquote><p>一个拍照做题程序。输入一张包含数学计算题的图片，输出识别出的数学计算式以及计算结果。This is a mathematic expression recognition project.</p></blockquote><p><a target="_blank" rel="noopener" href="https://github.com/Roujack/mathAI">mathAI</a></p><p>一个拍照做题程序。输入一张包含数学计算题的图片，输出识别出的数学计算式以及计算结果。<br><strong>请查看系统文档说明来运行程序。注意，这是一个半开源的项目，目前上传的版本只能处理简单的一维加减乘除算术表达式（如果想要识别更加复杂的表达式，可以参考数学公式识别的论文）。可以参考的代码是前面字符识别部分以及整个算法处理框架。</strong><br><img src="https://cdn.jsdelivr.net/gh/hvnobug/assets/blog/album/loading/11.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/Roujack/mathAI/test.png" alt=""></p><p>整个程序使用python实现，具体处理流程包括了图像预处理、字符识别、数学公式识别、数学公式语义理解、结果输出。</p><p>本程序使用opencv对输入的图像进行预处理，并将字符裁剪出来再归一化成固定大小的矩阵。我在TensorFlow上实现了一个lenet5<br>的卷积神经网络用来识别数学字符，训练使用CHROME数据集。对于数学公式的识别，主要是将识别出的独立的字符组织成计算机能够<br>理解的数学公式（这里的数学公式就是纯字符的可求解的数学计算题）。大概的方法是使用编译原理的算符优先法和递归下降法进行实现。<br>然后根据属性文法的值传递思想，将数学公式的值计算出来。最后使用python的matlibplot库把计算过程和答案打印出来。</p><p>优点：这是一整套拍照做题的算法框架，同时能够处理多种多样的计算题，目前市面上还没有看到实现。OCR技术如此成熟的今天字符识别<br>已经不算有挑战的东西了。<br>缺点：字符空间关系判断只用了人类启发式规则，图像预处理不够鲁棒，数学公式的结构识别算法不够完美（可以考虑使用二维文法来做）。<br>系统还有很大的提升空间。</p><p>这本来是一个很有野心的project，因为它试图解决所有的我们遇到的数学题。更一般的是，我试图实现一个演算系统，<br>在这个系统里，输入一些规则（公理），以及已知条件，我们希望它能够推出一些结论出来。但是我发现这是一个很难的问题。<br>最近的学习结论告诉我，一方面循环不变式的寻找无法自动化，另一方面演算的时间和空间复杂度太高（可以参考prolog语言的实现）。</p><p>什么是智能？是现在的机器学习吗？我觉得不像。SVM是最大化函数间隔的算法，神经网络是寻找损失函数局部最优解的过程。这些技术只是数学层面的优化。<br>还是某种推理能力？我不知道。如果给它一些演算规则，和一些具有现实意义的符号，再加上一些公理，它能够演算出一些结论，这个结论具有现实意义，<br>是不是就意味着智能？我觉着是的，不过很难实现。据说吴文俊采用了自动化的方法证明了几何定理（吴方法）。</p><p>我们的意识或者思维到底是什么东西？信息在大脑里面到底是如何表示的？我们为什么具有泛华的学习能力？一方面脑认知科学在求索，一方面计算科学也在求索。<br>我希望意识是能够认识物质的，并在最终达到越来越完美的过程。这才是科研的意义。我愿一直去寻找真理。</p><h2 id="oarriagaface_classification"><a class="markdownIt-Anchor" href="#oarriagaface_classification"></a> oarriaga/face_classification</h2><blockquote><p>Real-time face detection and emotion/gender classification using fer2013/imdb datasets with a keras CNN model and openCV.</p></blockquote><p>一个实时人脸检测,表情/性别分析</p><p><a target="_blank" rel="noopener" href="https://github.com/oarriaga/face_classification">face_classification</a></p><h3 id="face-classification-and-detection"><a class="markdownIt-Anchor" href="#face-classification-and-detection"></a> Face classification and detection.</h3><p>Real-time face detection and emotion/gender classification using fer2013/IMDB datasets with a keras CNN model and openCV.</p><ul><li>IMDB gender classification test accuracy: 96%.</li><li>fer2013 emotion classification test accuracy: 66%.</li></ul><p>For more information please consult the <a target="_blank" rel="noopener" href="https://cdn.jsdelivr.net/gh/oarriaga/face_classification@master/report.pdf">publication</a></p><h3 id="emotiongender-examples"><a class="markdownIt-Anchor" href="#emotiongender-examples"></a> Emotion/gender examples:</h3><p><img src="https://cdn.jsdelivr.net/gh/hvnobug/assets/blog/album/loading/11.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/oarriaga/face_classification@master/images/demo_results.png" alt=""></p><p>Guided back-prop<br><img src="https://cdn.jsdelivr.net/gh/hvnobug/assets/blog/album/loading/11.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/oarriaga/face_classification@master/images/gradcam_results.png" alt=""></p><p>Real-time demo:</p><div align="center"><img src="https://cdn.jsdelivr.net/gh/hvnobug/assets/blog/album/loading/11.gif" data-lazy-src="https://github.com/oarriaga/face_classification/raw/master/images/color_demo.gif" width="400px"></div><p><a target="_blank" rel="noopener" href="https://mas-group.inf.h-brs.de/?page_id=622">B-IT-BOTS</a> robotics team 😃<br><img src="https://cdn.jsdelivr.net/gh/hvnobug/assets/blog/album/loading/11.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/oarriaga/face_classification@master/images/robocup_team.png" alt=""></p><h4 id="instructions"><a class="markdownIt-Anchor" href="#instructions"></a> Instructions</h4><h5 id="run-real-time-emotion-demo"><a class="markdownIt-Anchor" href="#run-real-time-emotion-demo"></a> Run real-time emotion demo:</h5><blockquote><p>python3 video_emotion_color_demo.py</p></blockquote><h5 id="run-real-time-guided-back-prop-demo"><a class="markdownIt-Anchor" href="#run-real-time-guided-back-prop-demo"></a> Run real-time guided back-prop demo:</h5><blockquote><p>python3 image_gradcam_demo.py</p></blockquote><h5 id="make-inference-on-single-images"><a class="markdownIt-Anchor" href="#make-inference-on-single-images"></a> Make inference on single images:</h5><blockquote><p>python3 image_emotion_gender_demo.py &lt;image_path&gt;</p></blockquote><p>e.g.</p><blockquote><p>python3 image_emotion_gender_demo.py …/images/test_image.jpg</p></blockquote><h5 id="running-with-docker"><a class="markdownIt-Anchor" href="#running-with-docker"></a> Running with Docker</h5><p>With a few steps one can get its own face classification and detection running. Follow the commands below:</p><ul><li><code>docker pull ekholabs/face-classifier</code></li><li><code>docker run -d -p 8084:8084 --name=face-classifier ekholabs/face-classifier</code></li><li><code>curl -v -F image=@[path_to_image] http://localhost:8084/classifyImage &gt; image.png</code></li></ul><h5 id="to-train-previousnew-models-for-emotion-classification"><a class="markdownIt-Anchor" href="#to-train-previousnew-models-for-emotion-classification"></a> To train previous/new models for emotion classification:</h5><ul><li><p>Download the fer2013.tar.gz file from <a target="_blank" rel="noopener" href="https://www.kaggle.com/c/challenges-in-representation-learning-facial-expression-recognition-challenge/data">here</a></p></li><li><p>Move the downloaded file to the datasets directory inside this repository.</p></li><li><p>Untar the file:</p></li></ul><blockquote><p>tar -xzf fer2013.tar</p></blockquote><ul><li>Run the train_emotion_classification.py file</li></ul><blockquote><p>python3 train_emotion_classifier.py</p></blockquote><h5 id="to-train-previousnew-models-for-gender-classification"><a class="markdownIt-Anchor" href="#to-train-previousnew-models-for-gender-classification"></a> To train previous/new models for gender classification:</h5><ul><li><p>Download the imdb_crop.tar file from <a target="_blank" rel="noopener" href="https://data.vision.ee.ethz.ch/cvl/rrothe/imdb-wiki/">here</a> (It’s the 7GB button with the tittle Download faces only).</p></li><li><p>Move the downloaded file to the datasets directory inside this repository.</p></li><li><p>Untar the file:</p></li></ul><blockquote><p>tar -xfv imdb_crop.tar</p></blockquote><ul><li>Run the train_gender_classification.py file</li></ul><blockquote><p>python3 train_gender_classifier.py</p></blockquote><h2 id="fingers-detection-using-opencv-and-python"><a class="markdownIt-Anchor" href="#fingers-detection-using-opencv-and-python"></a> Fingers-Detection-using-OpenCV-and-Python</h2><blockquote><p>A simple Fingers Detection (or Gesture Recognition) using OpenCV and Python with background substraction 简单手势识别</p></blockquote><p><a target="_blank" rel="noopener" href="https://github.com/lzane/Fingers-Detection-using-OpenCV-and-Python">Fingers-Detection-using-OpenCV-and-Python</a></p><blockquote><p>for people using python2 and opencv2, please check out the <a target="_blank" rel="noopener" href="https://github.com/lzane/Fingers-Detection-using-OpenCV-and-Python/tree/py2_opencv2"><code>lzane:py2_opencv2</code></a> branch.</p></blockquote><blockquote><p>for people using opencv4, please change line 96 in the <code>new.py</code> to <code>contours, hierarchy = cv2.findContours(thresh1, cv2.RETR_TREE, cv2.CHAIN_APPROX_SIMPLE)</code> according to the <a target="_blank" rel="noopener" href="https://github.com/lzane/Fingers-Detection-using-OpenCV-and-Python/issues/7#issuecomment-509925971">opencv api change</a>.</p></blockquote><h3 id="environment"><a class="markdownIt-Anchor" href="#environment"></a> Environment</h3><ul><li>OS: MacOS El Capitan</li><li>Platform: Python 3</li><li>Librarys:<ul><li>OpenCV 3</li><li>appscript</li></ul></li></ul><h3 id="demo-videos"><a class="markdownIt-Anchor" href="#demo-videos"></a> Demo Videos</h3><ul><li>Youtube: <a target="_blank" rel="noopener" href="https://youtu.be/CmBxUnp7XwM">Click here</a></li><li>Youku: <a target="_blank" rel="noopener" href="http://v.youku.com/v_show/id_XMTc3MjI4MjQwOA==.html">Click here</a></li></ul><h3 id="how-to-run-it"><a class="markdownIt-Anchor" href="#how-to-run-it"></a> How to run it?</h3><ul><li>run it in python</li><li>press <code>'b'</code> to capture the background model (Remember to move your hand out of the blue rectangle)</li><li>press <code>'r'</code> to reset the backgroud model</li><li>press <code>'ESC'</code> to exit</li></ul><h3 id="process"><a class="markdownIt-Anchor" href="#process"></a> Process</h3><h4 id="capture-original-image"><a class="markdownIt-Anchor" href="#capture-original-image"></a> Capture original image</h4><p>Capture video from camera and pick up a frame.</p><p><img src="https://cdn.jsdelivr.net/gh/hvnobug/assets/blog/album/loading/11.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/lzane/Fingers-Detection-using-OpenCV-and-Python@master/material/-1474508814843.png" alt="Alt text"></p><h4 id="capture-background-model-background-subtraction"><a class="markdownIt-Anchor" href="#capture-background-model-background-subtraction"></a> Capture background model &amp; Background subtraction</h4><p>Use background subtraction method called <strong>Gaussian Mixture-based Background/Foreground Segmentation Algorithm</strong> to subtract background.</p><p>For more information about the method, check <a target="_blank" rel="noopener" href="http://www.zoranz.net/Publications/zivkovic2004ICPR.pdf">Zivkovic2004</a></p><p>Here I use the OpenCV’s built-in function <code>BackgroundSubtractorMOG2</code> to subtract background.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bgModel = cv2.BackgroundSubtractorMOG2(<span class="number">0</span>, bgSubThreshold)</span><br></pre></td></tr></table></figure><p>Build a background subtractor model</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fgmask = bgModel.apply(frame)</span><br></pre></td></tr></table></figure><p>Apply the model to a frame</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">res = cv2.bitwise_and(frame, frame, mask=fgmask)</span><br></pre></td></tr></table></figure><p>Get the foreground(hand) image</p><p><img src="https://cdn.jsdelivr.net/gh/hvnobug/assets/blog/album/loading/11.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/lzane/Fingers-Detection-using-OpenCV-and-Python@master/material/-1474508613267.png" alt="Alt text"></p><h4 id="gaussian-blur-threshold"><a class="markdownIt-Anchor" href="#gaussian-blur-threshold"></a> Gaussian blur &amp; Threshold</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gray = cv2.cvtColor(img, cv2.COLOR_BGR2GRAY)</span><br></pre></td></tr></table></figure><p>First convert the image to gray scale.</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">blur = cv2.GaussianBlur(gray, (blurValue, blurValue), <span class="number">0</span>)</span><br></pre></td></tr></table></figure><p>By Gaussian blurring, we create smooth transition from one color to another and reduce the edge content.</p><p><img src="https://cdn.jsdelivr.net/gh/hvnobug/assets/blog/album/loading/11.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/lzane/Fingers-Detection-using-OpenCV-and-Python@master/material/-1474508640877.png" alt="Alt text"></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ret, thresh = cv2.threshold(blur, threshold, <span class="number">255</span>, cv2.THRESH_BINARY)</span><br></pre></td></tr></table></figure><p>We use thresholding to create binary images from grayscale images.</p><p><img src="https://cdn.jsdelivr.net/gh/hvnobug/assets/blog/album/loading/11.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/lzane/Fingers-Detection-using-OpenCV-and-Python@master/material/-1474508661044.png" alt="Alt text"></p><h4 id="contour-hull-convexity"><a class="markdownIt-Anchor" href="#contour-hull-convexity"></a> Contour &amp; Hull &amp; Convexity</h4><p>We now need to find out the hand contour from the binary image we created before and detect fingers (or in other words, recognize gestures)</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">contours, hierarchy = cv2.findContours(thresh1, cv2.RETR_TREE, cv2.CHAIN_APPROX_SIMPLE)</span><br></pre></td></tr></table></figure><p>This function will find all the contours from the binary image. We need to get the biggest contours (our hand) based on their area since we can assume that our hand will be the biggest contour in this situation. (it’s obvious)</p><p>After picking up our hand, we can create its hull and detect the defects by calling :</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">hull = cv2.convexHull(res)</span><br><span class="line">defects = cv2.convexityDefects(res, hull)</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/hvnobug/assets/blog/album/loading/11.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/lzane/Fingers-Detection-using-OpenCV-and-Python@master/material/-1474508788185.png" alt="Alt text"></p><p>Now we have the number of fingers. How to use this information? It’s based on your imagination…</p><p>I add in a keyboard simulation package named <strong>appscript</strong> as interface to control Chrome’s dinosaur game.</p><p><img src="https://cdn.jsdelivr.net/gh/hvnobug/assets/blog/album/loading/11.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/lzane/Fingers-Detection-using-OpenCV-and-Python@master/material/-1474522195081.png" alt="Alt text"></p><hr><h3 id="references-tutorials"><a class="markdownIt-Anchor" href="#references-tutorials"></a> References &amp; Tutorials</h3><ol><li>OpenCV documentation:<br><a target="_blank" rel="noopener" href="http://docs.opencv.org/2.4.13/">http://docs.opencv.org/2.4.13/</a></li><li>Opencv python hand gesture recognition:<br><a target="_blank" rel="noopener" href="http://creat-tabu.blogspot.com/2013/08/opencv-python-hand-gesture-recognition.html">http://creat-tabu.blogspot.com/2013/08/opencv-python-hand-gesture-recognition.html</a></li><li>Mahaveerverma’s hand gesture recognition project:<br><a target="_blank" rel="noopener" href="https://github.com/mahaveerverma/hand-gesture-recognition-opencv">hand-gesture-recognition-opencv</a></li></ol><h2 id="kr1s77flask-video-streaming-recorder"><a class="markdownIt-Anchor" href="#kr1s77flask-video-streaming-recorder"></a> Kr1s77/flask-video-streaming-recorder</h2><blockquote><p>opencv+flask 家庭监控系统(surveillance_system)</p></blockquote><p><span align="center"><code>Raspberry Pi flask+opencv Surveillance System</code></span></p><br><p align="center"><img src="https://cdn.jsdelivr.net/gh/hvnobug/assets/blog/album/loading/11.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/CriseLYJ/flask-video-streaming-recorder@master/img/main.jpg" alt="Master"></p><br><p align="center">"<i>Did you know all your doors were locked?</i>" - Riddick (The Chronicles of Riddick)</p><br><p align="center"><a target="_blank" rel="noopener" href="https://github.com/CriseLYJ/flask-video-streaming-recorder/tree/master"><img src="https://cdn.jsdelivr.net/gh/hvnobug/assets/blog/album/loading/11.gif" data-lazy-src="https://img.shields.io/badge/Branch-master-green.svg?longCache=true" alt="Branch"> </a><a target="_blank" rel="noopener" href="https://github.com/CriseLYJ/flask-video-streaming-recorder/pulls"><img src="https://cdn.jsdelivr.net/gh/hvnobug/assets/blog/album/loading/11.gif" data-lazy-src="https://img.shields.io/badge/PRs-welcome-brightgreen.svg?longCache=true" alt="Pull Requests"> </a><a target="_blank" rel="noopener" href="http://www.gnu.org/licenses/"><img src="https://cdn.jsdelivr.net/gh/hvnobug/assets/blog/album/loading/11.gif" data-lazy-src="https://img.shields.io/badge/License-GNU-blue.svg?longCache=true" alt="License"></a></p><div align="center"><sub>Created by <a target="_blank" rel="noopener" href="https://criselyj.github.io/">CriseLYJ</a></sub></div><br><hr><h3 id="installing"><a class="markdownIt-Anchor" href="#installing"></a> Installing</h3><h4 id="first-you-should-install-python3x-on-your-raspberry-pi"><a class="markdownIt-Anchor" href="#first-you-should-install-python3x-on-your-raspberry-pi"></a> 🐍First you should install <code>Python3.x</code> on your Raspberry Pi</h4><blockquote><p>$ sudo apt-get update<br>$ sudo apt-get upgrade</p></blockquote><ul><li>Install python<code>dependent environment</code></li><li>install python <code>Dependent environment</code></li></ul><blockquote><p>$ sudo apt-get install build-essential libsqlite3-dev sqlite3 bzip2 libbz2-dev</p></blockquote><ul><li>Download the python3.6 version source and extract it</li><li>Download the python version 3.6 source code and decompress it</li></ul><blockquote><pre><code>  $ wget https://www.python.org/ftp/python/3.6.1/Python-3.6.1.tgz
  $ tar zxvf Python-3.6.1.tgz
</code></pre></blockquote><ul><li>Compilation and installation</li></ul><blockquote><pre><code>  $ cd Python-3.6.1
  $ sudo ./configure
  $ sudo make
  $ sudo make install
</code></pre></blockquote><ul><li>Check installation</li></ul><blockquote><p>$ ls -al /usr/local/bin/python*</p></blockquote><h4 id="next-install-the-module"><a class="markdownIt-Anchor" href="#next-install-the-module"></a> Next install the module</h4><ul><li>Install flask</li></ul><blockquote><p>$ pip3 install flask==0.10.1</p></blockquote><ul><li>Install opencv</li><li>install opencv</li></ul><blockquote><p>$ pip3 install opencv_python</p></blockquote><h3 id="running-the-tests"><a class="markdownIt-Anchor" href="#running-the-tests"></a> Running the tests</h3><ul><li>Download all files to run</li><li>run <a target="_blank" rel="noopener" href="http://main.py">main.py</a></li></ul><blockquote><p>$ python3 <a target="_blank" rel="noopener" href="http://main.py">main.py</a> -p 0.0.0.0<br>当然你也可以使用Gunicorn来当做你的多线程服务器</p></blockquote><ul><li><p>2019.2.21 update</p></li><li><p>Increased login, a simple login interface, does not need a database</p></li><li><p>Test account</p></li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Username:  admin</span><br><span class="line">Password:  admin</span><br></pre></td></tr></table></figure><ul><li><p>2019.3.4 update</p></li><li><p>Add multi-threading and recording downloads</p></li><li><p>Support multi-device access, logout login is normal</p></li><li><p>2019.3.14 update</p></li><li><p>现在的目录结构是这个样子</p></li></ul><p><img src="https://cdn.jsdelivr.net/gh/hvnobug/assets/blog/album/loading/11.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/Kr1s77/flask-video-streaming-recorder@master/img/tree.png" alt=""></p><ul><li><p>抽取了代码，进行了优化，就是这样目录看起来会很多</p></li><li><p>Added a beautiful login interface<br><img src="https://cdn.jsdelivr.net/gh/hvnobug/assets/blog/album/loading/11.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/Kr1s77/flask-video-streaming-recorder@master/img/login.png" alt="Alt text"></p></li><li><p>Optimization homepage</p></li></ul><p><img src="https://cdn.jsdelivr.net/gh/hvnobug/assets/blog/album/loading/11.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/Kr1s77/flask-video-streaming-recorder@master/img/index.jpg" alt="Alt text"></p><ul><li>Add video recording and download capabilities</li><li>Realized the <code>high performance</code>, using the yield generator, and multi-threading, silky smooth!</li></ul><h3 id="author"><a class="markdownIt-Anchor" href="#author"></a> Author</h3><ul><li>Crise LYJ</li></ul><h3 id="acknowledgments"><a class="markdownIt-Anchor" href="#acknowledgments"></a> Acknowledgments</h3><ul><li><p>Thanks for all!</p></li><li><p>Have a good time!</p></li></ul><p><img src="https://cdn.jsdelivr.net/gh/hvnobug/assets/blog/album/loading/11.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/Kr1s77/flask-video-streaming-recorder@master/img/hha.jpeg" alt="Alt text"></p><h2 id="nuno-fariatiler"><a class="markdownIt-Anchor" href="#nuno-fariatiler"></a> nuno-faria/tiler</h2><blockquote><p>👷 Build images with images</p></blockquote><p><a target="_blank" rel="noopener" href="https://github.com/nuno-faria/tiler">nuno-faria/tiler</a></p><p><img src="https://cdn.jsdelivr.net/gh/hvnobug/assets/blog/album/loading/11.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/nuno-faria/tiler@master/images/title_stripes.png" alt="title"></p><p>👷 Build images with images.</p><h3 id="about"><a class="markdownIt-Anchor" href="#about"></a> About</h3><p>Tiler is a tool to create an image using all kinds of other smaller images (tiles). It is different from other mosaic tools since it can adapt to tiles with multiple shapes and sizes (i.e. not limited to squares).</p><p>An image can be built out of circles, lines, waves, cross stitches, legos, minecraft blocks, paper clips, letters, … The possibilities are endless!</p><h3 id="installation"><a class="markdownIt-Anchor" href="#installation"></a> Installation</h3><ul><li>Clone the repo: <code>git clone https://github.com/nuno-faria/tiler.git</code>;</li><li>Install Python 3;</li><li>Install pip (optional, to install the dependencies);</li><li>Install dependencies: <code>pip install -r requirements.txt</code></li></ul><h3 id="usage"><a class="markdownIt-Anchor" href="#usage"></a> Usage</h3><ul><li>Make a folder with the tiles (and only the tiles) to build the image;<ul><li>The script <code>gen_tiles.py</code> can help in this task; it builds tiles with multiple colors based on the source tile (note: its recommended for the source file to have an RGB color of (240,240,240)). It is used as <code>python gen_tiles.py path/to/image</code> and creates a folder with a ‘gen_’ prefix in the same path as the base image.</li></ul></li><li>Run <code>python tiler.py path/to/image path/to/tiles_folder/</code>.</li></ul><h3 id="configuration"><a class="markdownIt-Anchor" href="#configuration"></a> Configuration</h3><p>All configurations can be changed in the <code>conf.py</code> file.</p><h4 id="gen_tilespy"><a class="markdownIt-Anchor" href="#gen_tilespy"></a> <code>gen_tiles.py</code></h4><ul><li><code>DEPTH</code> - number of divisions in each color channel (ex: DEPTH = 4 -&gt; 4 * 4 * 4 = 64 colors);</li><li><code>ROTATIONS</code> - list of rotations, in degrees, to apply over the original image (ex: [0, 90]).</li></ul><h4 id="tilerpy"><a class="markdownIt-Anchor" href="#tilerpy"></a> <code>tiler.py</code></h4><ul><li><code>COLOR_DEPTH</code> - number of divisions in each color channel (ex: COLOR_DEPTH = 4 -&gt; 4 * 4 * 4 = 64 colors);</li><li><code>RESIZING_SCALES</code> - scale to apply to each tile (ex: [1, 0.75, 0.5, 0.25]);</li><li><code>PIXEL_SHIFT</code> - number of pixels shifted to create each box (ex: (5,5)); if None, shift will be the same as the tile dimension);<br><img src="https://cdn.jsdelivr.net/gh/hvnobug/assets/blog/album/loading/11.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/nuno-faria/tiler@master/images/pixel_shift.png" width="100%"></li><li><code>OVERLAP_TILES</code> - if tiles can overlap;</li><li><code>RENDER</code> - render image as its being built;</li><li><code>POOL_SIZE</code> - multiprocessing pool size;</li><li><code>IMAGE_TO_TILE</code> - image to tile (ignored if passed as the 1st arg);</li><li><code>TILES_FOLDER</code> - folder with tiles (ignored if passed as the 2nd arg);</li><li><code>OUT</code> - result image filename.</li></ul><h3 id="examples"><a class="markdownIt-Anchor" href="#examples"></a> Examples</h3><h4 id="circles"><a class="markdownIt-Anchor" href="#circles"></a> Circles</h4><h5 id="various-sizes"><a class="markdownIt-Anchor" href="#various-sizes"></a> Various sizes</h5><img src="https://cdn.jsdelivr.net/gh/hvnobug/assets/blog/album/loading/11.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/nuno-faria/tiler@master/images/cake_circles.png" width="40%"><p><a target="_blank" rel="noopener" href="https://www.flaticon.com/free-icon/cake_1102780">Original</a> cake image by <a target="_blank" rel="noopener" href="https://www.flaticon.com/authors/pongsakornred">pongsakornred</a> from <a target="_blank" rel="noopener" href="https://www.flaticon.com">FLATICON</a>.</p><h5 id="fixed"><a class="markdownIt-Anchor" href="#fixed"></a> Fixed</h5><ul><li>10x10<br><img src="https://cdn.jsdelivr.net/gh/hvnobug/assets/blog/album/loading/11.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/nuno-faria/tiler@master/images/cake_circles_simple.png" width="40%"><br><img src="https://cdn.jsdelivr.net/gh/hvnobug/assets/blog/album/loading/11.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/nuno-faria/tiler@master/images/starry_night_circles_10x10.png" width="100%"></li><li>25x25<br><img src="https://cdn.jsdelivr.net/gh/hvnobug/assets/blog/album/loading/11.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/nuno-faria/tiler@master/images/starry_night_circles_25x25.png" width="100%"></li><li>50x50<br><img src="https://cdn.jsdelivr.net/gh/hvnobug/assets/blog/album/loading/11.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/nuno-faria/tiler@master/images/starry_night_circles_50x50.png" width="100%"></li></ul><h4 id="paper-clips"><a class="markdownIt-Anchor" href="#paper-clips"></a> Paper clips</h4><img src="https://cdn.jsdelivr.net/gh/hvnobug/assets/blog/album/loading/11.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/nuno-faria/tiler@master/images/cake_clips.png" width="40%"><h4 id="cross-stitch-times"><a class="markdownIt-Anchor" href="#cross-stitch-times"></a> Cross stitch (times)</h4><img src="https://cdn.jsdelivr.net/gh/hvnobug/assets/blog/album/loading/11.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/nuno-faria/tiler@master/images/cake_times.png" width="40%"> <img src="https://cdn.jsdelivr.net/gh/hvnobug/assets/blog/album/loading/11.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/nuno-faria/tiler@master/images/starry_night_times.png" width="100%"><h4 id="hearts"><a class="markdownIt-Anchor" href="#hearts"></a> Hearts</h4><img src="https://cdn.jsdelivr.net/gh/hvnobug/assets/blog/album/loading/11.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/nuno-faria/tiler@master/images/heart_hearts.png" width="40%"><h4 id="legos"><a class="markdownIt-Anchor" href="#legos"></a> Legos</h4><img src="https://cdn.jsdelivr.net/gh/hvnobug/assets/blog/album/loading/11.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/nuno-faria/tiler@master/images/cake_lego.png" width="40%"> <img src="https://cdn.jsdelivr.net/gh/hvnobug/assets/blog/album/loading/11.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/nuno-faria/tiler@master/images/starry_night_lego.png" width="100%"><h4 id="minecraft-blocks"><a class="markdownIt-Anchor" href="#minecraft-blocks"></a> Minecraft blocks</h4><img src="https://cdn.jsdelivr.net/gh/hvnobug/assets/blog/album/loading/11.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/nuno-faria/tiler@master/images/cake_minecraft.png" width="40%"> <img src="https://cdn.jsdelivr.net/gh/hvnobug/assets/blog/album/loading/11.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/nuno-faria/tiler@master/images/starry_night_minecraft.png" width="100%"><h4 id="stripes-lines"><a class="markdownIt-Anchor" href="#stripes-lines"></a> Stripes (lines)</h4><img src="https://cdn.jsdelivr.net/gh/hvnobug/assets/blog/album/loading/11.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/nuno-faria/tiler@master/images/cake_stripes.png" width="50%"><h4 id="at"><a class="markdownIt-Anchor" href="#at"></a> At</h4><img src="https://cdn.jsdelivr.net/gh/hvnobug/assets/blog/album/loading/11.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/nuno-faria/tiler@master/images/github_logo_at.png" width="50%"><h2 id="hironsanbosssensor"><a class="markdownIt-Anchor" href="#hironsanbosssensor"></a> Hironsan/BossSensor</h2><blockquote><p>Hide screen when boss is approaching.</p></blockquote><p><a target="_blank" rel="noopener" href="https://github.com/Hironsan/BossSensor">BossSensor</a></p><h3 id="bosssensor"><a class="markdownIt-Anchor" href="#bosssensor"></a> BossSensor</h3><p>Hide your screen when your boss is approaching.</p><h4 id="demo"><a class="markdownIt-Anchor" href="#demo"></a> Demo</h4><p>The boss stands up. He is approaching.</p><p><img src="https://cdn.jsdelivr.net/gh/hvnobug/assets/blog/album/loading/11.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/Hironsan/BossSensor@master/resource_for_readme/standup.jpg" alt="standup"></p><p>When he is approaching, the program fetches face images and classifies the image.</p><p><img src="https://cdn.jsdelivr.net/gh/hvnobug/assets/blog/album/loading/11.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/Hironsan/BossSensor@master/resource_for_readme/approach.jpg" alt="approaching"></p><p>If the image is classified as the Boss, it will monitor changes.</p><p><img src="https://cdn.jsdelivr.net/gh/hvnobug/assets/blog/album/loading/11.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/Hironsan/BossSensor@master/resource_for_readme/editor.jpg" alt="editor"></p><h4 id="requirements"><a class="markdownIt-Anchor" href="#requirements"></a> Requirements</h4><ul><li>WebCamera</li><li>Python3.5</li><li>OSX</li><li>Anaconda</li><li>Lots of images of your boss and other person image</li></ul><p>Put images into <a target="_blank" rel="noopener" href="https://cdn.jsdelivr.net/gh/Hironsan/BossSensor/tree/master/data/boss">data/boss</a> and <a target="_blank" rel="noopener" href="https://github.com/Hironsan/BossSensor/tree/master/data/other">data/other</a>.</p><h4 id="usage-2"><a class="markdownIt-Anchor" href="#usage-2"></a> Usage</h4><p>First, Train boss image.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ python boss_train.py</span><br></pre></td></tr></table></figure><p>Second, start BossSensor.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ python camera_reader.py</span><br></pre></td></tr></table></figure><h4 id="install"><a class="markdownIt-Anchor" href="#install"></a> Install</h4><p>Install OpenCV, PyQt4, Anaconda.</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">conda create -n venv python&#x3D;3.5</span><br><span class="line">source activate venv</span><br><span class="line">conda install -c https:&#x2F;&#x2F;conda.anaconda.org&#x2F;menpo opencv3</span><br><span class="line">conda install -c conda-forge tensorflow</span><br><span class="line">pip install -r requirements.txt</span><br></pre></td></tr></table></figure><p>Change Keras backend from Theano to TensorFlow.</p><h4 id="licence"><a class="markdownIt-Anchor" href="#licence"></a> Licence</h4><p><a target="_blank" rel="noopener" href="https://github.com/Hironsan/BossSensor/blob/master/LICENSE">MIT</a></p><h4 id="author-2"><a class="markdownIt-Anchor" href="#author-2"></a> Author</h4><p><a target="_blank" rel="noopener" href="https://github.com/Hironsan">Hironsan</a></p><h2 id="vipstonefaceai"><a class="markdownIt-Anchor" href="#vipstonefaceai"></a> vipstone/faceai</h2><blockquote><p>一款入门级的人脸、视频、文字检测以及识别的项目.</p></blockquote><p><a target="_blank" rel="noopener" href="https://github.com/vipstone/faceai">vipstone/faceai</a></p><h3 id="功能"><a class="markdownIt-Anchor" href="#功能"></a> 功能</h3><ol><li>人脸检测、识别（图片、视频）</li><li>轮廓标识</li><li>头像合成（给人戴帽子）</li><li>数字化妆（画口红、眉毛、眼睛等）</li><li>性别识别</li><li>表情识别（生气、厌恶、恐惧、开心、难过、惊喜、平静等七种情绪）</li><li>视频对象提取</li><li>图片修复（可用于水印去除）</li><li>图片自动上色</li><li>眼动追踪（待完善）</li><li>换脸（待完善）</li></ol><p><strong>查看功能预览↓↓↓</strong></p><h3 id="开发环境"><a class="markdownIt-Anchor" href="#开发环境"></a> 开发环境</h3><ul><li>Windows 10（x64）</li><li>Python 3.6.4</li><li>OpenCV 3.4.1</li><li>Dlib 19.8.1</li><li>face_recognition 1.2.2</li><li>keras 2.1.6</li><li>tensorflow 1.8.0</li><li>Tesseract OCR 4.0.0-beta.1</li></ul><h3 id="教程"><a class="markdownIt-Anchor" href="#教程"></a> 教程</h3><p><a href="doc/settingup.md">OpenCV环境搭建</a></p><p><a href="doc/tesseractOCR.md">Tesseract OCR文字识别</a></p><p><a href="doc/detectionOpenCV.md">图片人脸检测（OpenCV版）</a></p><p><a href="doc/detectionDlib.md">图片人脸检测（Dlib版）</a></p><p><a href="doc/videoOpenCV.md">视频人脸检测（OpenCV版）</a></p><p><a href="doc/videoDlib.md">视频人脸检测（Dlib版）</a></p><p><a href="doc/faceRecognitionOutline.md">脸部轮廓绘制</a></p><p><a href="doc/faceRecognitionMakeup.md">数字化妆</a></p><p><a href="doc/faceRecognition.md">视频人脸识别</a></p><p><a href="doc/compose.md">头像特效合成</a></p><p><a href="doc/gender.md">性别识别</a></p><p><a href="doc/emotion.md">表情识别</a></p><p><a target="_blank" rel="noopener" href="https://github.com/vipstone/faceai/blob/master/doc/hsv-opencv.md">视频对象提取</a></p><p><a target="_blank" rel="noopener" href="https://github.com/vipstone/faceai/blob/master/doc/inpaint.md">图片修复</a></p><h3 id="其他教程"><a class="markdownIt-Anchor" href="#其他教程"></a> 其他教程</h3><p><a href="doc/ubuntuChange.md">Ubuntu apt-get和pip源更换</a></p><p><a href="doc/pipChange.md">pip/pip3更换国内源——Windows版</a></p><p><a href="doc/chinese.md">OpenCV添加中文</a></p><p><a target="_blank" rel="noopener" href="https://github.com/vipstone/faceai/blob/master/doc/opencv/mouse.md">使用鼠标绘图——OpenCV</a></p><h3 id="功能预览"><a class="markdownIt-Anchor" href="#功能预览"></a> 功能预览</h3><p><strong>绘制脸部轮廓</strong></p><img src="https://cdn.jsdelivr.net/gh/hvnobug/assets/blog/album/loading/11.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/vipstone/faceai@master/res/face_recognition-outline.png" width="250" height="300" alt="绘制脸部轮廓"><hr><p><strong>人脸68个关键点标识</strong></p><img src="https://cdn.jsdelivr.net/gh/hvnobug/assets/blog/album/loading/11.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/vipstone/faceai@master/res/dlib68.png" width="230" height="300" alt="人脸68个关键点标识"><hr><p><strong>头像特效合成</strong></p><img src="https://cdn.jsdelivr.net/gh/hvnobug/assets/blog/album/loading/11.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/vipstone/faceai@master/res/compose.png" width="200" height="300" alt="头像特效合成"><hr><p><strong>性别识别</strong></p><img src="https://cdn.jsdelivr.net/gh/hvnobug/assets/blog/album/loading/11.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/vipstone/faceai@master/res/gender.png" width="430" height="220" alt="性别识别"><hr><p><strong>表情识别</strong></p><img src="https://cdn.jsdelivr.net/gh/hvnobug/assets/blog/album/loading/11.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/vipstone/faceai@master/res/emotion.png" width="250" height="300" alt="表情识别"><hr><p><strong>数字化妆</strong></p><img src="https://cdn.jsdelivr.net/gh/hvnobug/assets/blog/album/loading/11.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/vipstone/faceai@master/res/faceRecognitionMakeup-1.png" width="450" height="300" alt="视频人脸识别"><hr><p><strong>视频人脸检测</strong></p><p><img src="https://cdn.jsdelivr.net/gh/hvnobug/assets/blog/album/loading/11.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/vipstone/faceai@master/res/video-jiance.gif" alt=""></p><hr><p><strong>视频人脸识别</strong></p><p><img src="https://cdn.jsdelivr.net/gh/hvnobug/assets/blog/album/loading/11.gif" data-lazy-src="https://cdn.jsdelivr.net/gh/vipstone/faceai@master/res/faceRecognition.gif" alt=""></p><hr><p><strong>视频人脸识别</strong></p><p><img src="https://cdn.jsdelivr.net/gh/hvnobug/assets/blog/album/loading/11.gif" data-lazy-src="http://icdn.apigo.cn/opencv-hsv.gif" alt=""></p><hr><p><strong>图片修复</strong></p><p><img src="https://cdn.jsdelivr.net/gh/hvnobug/assets/blog/album/loading/11.gif" data-lazy-src="http://icdn.apigo.cn/inpaint.png?2" alt=""></p><hr><p><strong>图片自动上色</strong></p><p><img src="https://cdn.jsdelivr.net/gh/hvnobug/assets/blog/album/loading/11.gif" data-lazy-src="http://icdn.apigo.cn/colorize-faceai.png" alt=""></p><hr><h3 id="技术方案"><a class="markdownIt-Anchor" href="#技术方案"></a> 技术方案</h3><p>技术实现方案介绍</p><pre><code>人脸识别：OpenCV / Dlib

人脸检测：face_recognition

性别识别：keras + tensorflow

文字识别：Tesseract OCR
</code></pre><h4 id="todo"><a class="markdownIt-Anchor" href="#todo"></a> TODO</h4><p>换脸——待完善</p><p>眼睛移动方向检测——待完善</p><p>Dlib性能优化方案</p><p>Dlib模型训练方法</p><p>Tesseract模型训练方法</p><h2 id="youyuge34anime-inpainting"><a class="markdownIt-Anchor" href="#youyuge34anime-inpainting"></a> youyuge34/Anime-InPainting</h2><blockquote><p>An application tool of edge-connect, which can do anime inpainting and drawing. 动漫人物图片自动修复，去马赛克，填补，去瑕疵</p></blockquote><p><a target="_blank" rel="noopener" href="https://github.com/youyuge34/Anime-InPainting">youyuge34/Anime-InPainting</a></p><p>Anime-InPainting: An application Tool based on <a target="_blank" rel="noopener" href="https://github.com/knazeri/edge-connect">Edge-Connect</a></p><p align="left"><img src="https://cdn.jsdelivr.net/gh/hvnobug/assets/blog/album/loading/11.gif" data-lazy-src="https://img.shields.io/badge/version-0.2-brightgreen.svg?style=flat-square" alt="Version"> <img src="https://cdn.jsdelivr.net/gh/hvnobug/assets/blog/album/loading/11.gif" data-lazy-src="https://img.shields.io/badge/status-Release-gold.svg?style=flat-square" alt="Status"> <img src="https://cdn.jsdelivr.net/gh/hvnobug/assets/blog/album/loading/11.gif" data-lazy-src="https://img.shields.io/badge/platform-win | linux-lightgrey.svg?style=flat-square" alt="Platform"> <img src="https://cdn.jsdelivr.net/gh/hvnobug/assets/blog/album/loading/11.gif" data-lazy-src="https://img.shields.io/badge/PyTorch version-1.0-blue.svg?style=flat-square" alt="PyTorch"> <img src="https://cdn.jsdelivr.net/gh/hvnobug/assets/blog/album/loading/11.gif" data-lazy-src="https://img.shields.io/badge/License-CC BY·NC 4.0-green.svg?style=flat-square" alt="License"></p><hr><h3 id="重要"><a class="markdownIt-Anchor" href="#重要"></a> 重要</h3><p><strong>2019.3.27 更新:</strong><br>我们的最新模型 <a target="_blank" rel="noopener" href="https://github.com/youyuge34/PI-REC">PI-REC</a> 更强大.<br>如果你想用最新的AI绘画黑科技，而非仅仅是修补图像，请点击上面的链接👆</p><hr><h3 id="简介"><a class="markdownIt-Anchor" href="#简介"></a> 简介</h3><p>Tool效果看上面👆 | Bilibili视频教程：TO DO</p><p>这是图像修补方向最新研究成果<a target="_blank" rel="noopener" href="https://github.com/knazeri/edge-connect">Edge-Connect</a>的<s>阿姆斯特朗氮气加速魔改</s>（优化）版。<br>用<code>Opencv</code>写了个前端部分，后端是<a target="_blank" rel="noopener" href="https://github.com/knazeri/edge-connect">Edge-Connect</a>，方便当作工具使用。<br>此工具可以用来自动图像修补，去马赛克……同样优化了模型训练的过程。具体优化内容请看<a href="#improve">英文版Improvements</a>。</p><p>更新：<a target="_blank" rel="noopener" href="https://github.com/youyuge34/Anime-InPainting/blob/master/training_manual.md#jump_zh">训练手册</a>已经填坑完发布了！你可以照着指南训练自己数据集了~</p><h3 id="基础环境"><a class="markdownIt-Anchor" href="#基础环境"></a> 基础环境</h3><ul><li>Python 3</li><li>PyTorch <code>1.0</code> (<code>0.4</code> 会报错)</li><li>NVIDIA GPU + CUDA cuDNN （当前版本已可选cpu，请修改<code>config.yml</code>中的<code>DEVICE</code>）</li></ul><h3 id="第三方库安装"><a class="markdownIt-Anchor" href="#第三方库安装"></a> 第三方库安装</h3><ul><li>Clone this repo</li><li>安装PyTorch和torchvision --&gt; <a target="_blank" rel="noopener" href="http://pytorch.org">http://pytorch.org</a></li><li>安装 python requirements:</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install -r requirements.txt</span><br></pre></td></tr></table></figure><h3 id="运行tool"><a class="markdownIt-Anchor" href="#运行tool"></a> 运行Tool</h3><p>教练！我有个大胆的想法🈲……别急，一步步来：</p><p><strong>注意：以下模型是在动漫头像数据集上训练的，所以对动漫全身大图修补效果一般，想自己再训练的参考下面的训练指南</strong></p><ol><li>下训练好的模型文件 --&gt; <a target="_blank" rel="noopener" href="https://drive.google.com/file/d/12I-K7GQEXEL_rEOVJnRv7ecVHyuZE-1-/view?usp=sharing">Google Drive</a> | <a target="_blank" rel="noopener" href="https://pan.baidu.com/s/1WkeRtYViGGGw4fUqPo3nsg">Baidu</a></li><li>解压 <code>.7z</code> 放到你的根目录下.<br>确保你的目录现在是这样: <code>./model/getchu/&lt;xxxxx.pth&gt;</code></li><li>完成上面的基础环境和第三方库安装步骤</li><li>(可选) 检查并编辑 <code>./model/getchu/config.yml</code> 配置文件</li><li>使用以下命令运行：</li></ol><h4 id="默认tool"><a class="markdownIt-Anchor" href="#默认tool"></a> 默认Tool:</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python tool_patch.py --path model/getchu/</span><br></pre></td></tr></table></figure><h4 id="带edge编辑窗口的tool"><a class="markdownIt-Anchor" href="#带edge编辑窗口的tool"></a> 带Edge编辑窗口的Tool:</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python tool_patch.py --edge --path model/getchu/</span><br></pre></td></tr></table></figure><h4 id="命令行参数帮助"><a class="markdownIt-Anchor" href="#命令行参数帮助"></a> 命令行参数帮助</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python tool_patch.py -h</span><br></pre></td></tr></table></figure><blockquote><p>PS. 你也能用tool跑别的任何模型，在这里下载原作更多模型<a target="_blank" rel="noopener" href="https://github.com/knazeri/edge-connect">Edge-Connect</a>.<br>文件组织方式参考上面，其余运行命令都一样。唯一注意的是这个项目的 <code>config.yml</code> 比原作的多了几个选项，报错了的话注意修改。</p></blockquote><h3 id="tool操作指南"><a class="markdownIt-Anchor" href="#tool操作指南"></a> Tool操作指南</h3><p>详细内容请翻看控制台的打印内容，或查看<code>tool_patch.py</code>里的<code>__doc__</code><br>简略版tool使用指南：</p><table><thead><tr><th>按键</th><th>说明</th></tr></thead><tbody><tr><td>鼠标左键</td><td>Input窗口：画出瑕疵区域的遮盖，Edge窗口：手动画边缘</td></tr><tr><td>鼠标右键</td><td>Edge窗口：橡皮擦</td></tr><tr><td>按键 <code>[</code></td><td>笔刷变细 （控制台打印粗细大小）</td></tr><tr><td>按键 <code>]</code></td><td>笔刷变粗</td></tr><tr><td>按键 <code>0</code></td><td>Todo</td></tr><tr><td>按键 <code>1</code></td><td>Todo</td></tr><tr><td>按键 <code>n</code></td><td>修补黑色涂抹区域，只使用一张输入图片</td></tr><tr><td>按键 <code>e</code></td><td>修补黑色涂抹区域，使用输入图片和边缘图片（仅当edge窗口启动时有效）</td></tr><tr><td>按键 <code>r</code></td><td>全部重置</td></tr><tr><td>按键 <code>s</code></td><td>保存输出图片</td></tr><tr><td>按键 <code>q</code></td><td>退出</td></tr></tbody></table><h3 id="训练指南"><a class="markdownIt-Anchor" href="#训练指南"></a> 训练指南</h3><p>训练指南 --&gt; <a target="_blank" rel="noopener" href="https://github.com/youyuge34/Anime-InPainting/blob/master/training_manual.md#jump_zh">阅读</a></p><h3 id="feature-matching特征匹配"><a class="markdownIt-Anchor" href="#feature-matching特征匹配"></a> Feature Matching(特征匹配)</h3><ul><li>对水印模板图片进行了一些初始化处理，比如二值化后去除非文字部分等</li><li>尝试了 OpenCV 的多种算法<ul><li>比如 ORB + Brute-Force，即蛮力匹配，对应 cv2.BFMatcher() 方法</li><li>比如 SIFT + FLANN，即快速最近邻匹配，对应 cv2.BFMatcher() 方法</li><li>比如 Template Matching，即模板匹配，对应 cv2.matchTemplate() 方法</li></ul></li><li>最后发现 Template Matching 最简单方便，效果也最好。</li><li>如果水印位置固定的话则可以跳过Feature Matching(特征匹配)，直接进行下一步的Inpainting(图片修复)</li></ul><h3 id="inpainting图片修复"><a class="markdownIt-Anchor" href="#inpainting图片修复"></a> Inpainting(图片修复)</h3><ul><li>修复图片前需要做一些前置处理<ul><li>首先要得到图片的去水印 Mask 图片，即和待处理图片一样大小的除了水印部分的文字部分外其他部分全部是黑色的位图</li><li>因为前面对水印做了二值化等处理，最终效果发现会有水印轮廓，所以需要对 Mask 图片做一次膨胀处理覆盖掉轮廓</li></ul></li><li>选用了Telea在2004年提出的Telea算法，即基于快速行进（FMM）的修复算法<ul><li>对应 cv2.inpaint(img, mask, 5, cv2.INPAINT_TELEA)</li><li>对应论文：<a target="_blank" rel="noopener" href="http://www.cs.rug.nl/~alext/PAPERS/JGT04/paper.pdf">An Image Inpainting Technique Based on the Fast Marching Method (2004)</a></li></ul></li></ul><h3 id="todo-2"><a class="markdownIt-Anchor" href="#todo-2"></a> Todo</h3><ul><li>由于某些图片的水印和背景图片相似程度太高，如何提高水印位置的识别正确率</li><li>改进修复图片算法，可以考虑用深度学习来做做看？</li><li>Google CVPR 2017, <a target="_blank" rel="noopener" href="https://watermark-cvpr17.github.io">《On the Effectiveness of Visible Watermarks》</a>这个据说很牛的，回头可以读一读</li></ul><h4 id="license"><a class="markdownIt-Anchor" href="#license"></a> License</h4><p><a target="_blank" rel="noopener" href="https://tldrlegal.com/license/mit-license">MIT</a></p></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">Emil</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://blog.hvnobug.com/post/opencv-opensource.html">https://blog.hvnobug.com/post/opencv-opensource.html</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://blog.hvnobug.com" target="_blank">Emil`s Blog</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/python/">python</a><a class="post-meta__tags" href="/tags/opencv/">opencv</a></div><div class="post_share"><div class="social-share" data-image="https://cdn.jsdelivr.net/gh/hvnobug/assets/blog/album/original-anime/16.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css"><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js" defer></script></div></div><div class="post-reward"><div class="reward-button"><i class="fas fa-qrcode"></i> 打赏<div class="reward-main"><ul class="reward-all"><li class="reward-item"><a href="https://cdn.jsdelivr.net/gh/hvnobug/assets/blog/medias/reward/wechat.png" target="_blank"><img class="post-qr-code-img" data-lazy-src="https://cdn.jsdelivr.net/gh/hvnobug/assets/blog/medias/reward/wechat.png" alt="wechat"></a><div class="post-qr-code-desc">wechat</div></li><li class="reward-item"><a href="https://cdn.jsdelivr.net/gh/hvnobug/assets/blog/medias/reward/alipay.jpg" target="_blank"><img class="post-qr-code-img" data-lazy-src="https://cdn.jsdelivr.net/gh/hvnobug/assets/blog/medias/reward/alipay.jpg" alt="alipay"></a><div class="post-qr-code-desc">alipay</div></li></ul></div></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/post/awesome-java-github-project.html"><img class="prev-cover" data-lazy-src="https://cdn.jsdelivr.net/gh/hvnobug/assets/blog/album/original-anime/2.png" onerror='onerror=null,src="/img/404.jpg"'><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">推荐一些实用的Github项目(Java篇)</div></div></a></div><div class="next-post pull-right"><a href="/post/about-document-encrypt.html"><img class="next-cover" data-lazy-src="https://cdn.jsdelivr.net/gh/hvnobug/assets/blog/album/original-anime/1.png" onerror='onerror=null,src="/img/404.jpg"'><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">关于博客文章加密的设计</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span> 相关推荐</span></div><div class="relatedPosts-list"><div><a href="/post/selenium-12306-ticket.html" title="Selenium实现12306自动购票"><img class="cover" data-lazy-src="https://cdn.jsdelivr.net/gh/hvnobug/assets/blog/album/original-anime/43.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-01-06</div><div class="title">Selenium实现12306自动购票</div></div></a></div><div><a href="/post/selenium-12306-login.html" title="Selenium实现12306自动登录"><img class="cover" data-lazy-src="https://cdn.jsdelivr.net/gh/hvnobug/assets/blog/album/original-anime/42.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-01-01</div><div class="title">Selenium实现12306自动登录</div></div></a></div><div><a href="/post/how-interesting-project-thefuck.html" title="一个神奇的 python 开源项目-thefuck"><img class="cover" data-lazy-src="https://cdn.jsdelivr.net/gh/hvnobug/assets/blog/album/original-anime/12.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2019-12-25</div><div class="title">一个神奇的 python 开源项目-thefuck</div></div></a></div></div></div><hr><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div class="vcomment" id="vcomment"></div></div></div></div></div><div class="aside_content" id="aside_content"><div class="card-widget card-info"><div class="card-content"><div class="card-info-avatar is-center"><img class="avatar-img" data-lazy-src="https://cdn.jsdelivr.net/gh/hvnobug/assets/common/avatar.png" onerror='this.onerror=null,this.src="/img/friend_404.gif"' alt="avatar"><div class="author-info__name">Emil</div><div class="author-info__description">Emil`s Blog 是 Hexo 建造的个人博客网站.Java 第三方开源框架源码. 其他语言技术分享. 个人博客搭建.</div></div><div class="card-info-data"><div class="card-info-data-item is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">56</div></a></div><div class="card-info-data-item is-center"><a href="/tags/"><div class="headline">标签</div><div class="length-num">34</div></a></div><div class="card-info-data-item is-center"><a href="/categories/"><div class="headline">分类</div><div class="length-num">32</div></a></div></div><a class="button--animated" id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/xxxxxx"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/hvnobug/" target="_blank"><i class="fa fa-github"></i></a><a class="social-icon" href="mailto:972080809@qq.com" target="_blank"><i class="fa fa-envelope"></i></a><a class="social-icon" href="/atom.xml" target="_blank"><i class="fa fa-rss"></i></a></div></div></div><div class="card-widget card-announcement"><div class="card-content"><div class="item-headline"><i class="fas fa-bullhorn card-announcement-animation"></i><span>公告</span></div><div class="announcement_content">感谢访问本站,若喜欢请收藏 ^_^</div></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="card-content"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#roujackmathai"><span class="toc-number">1.</span> <span class="toc-text">Roujack&#x2F;mathAI</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#oarriagaface_classification"><span class="toc-number">2.</span> <span class="toc-text">oarriaga&#x2F;face_classification</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#face-classification-and-detection"><span class="toc-number">2.1.</span> <span class="toc-text">Face classification and detection.</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#emotiongender-examples"><span class="toc-number">2.2.</span> <span class="toc-text">Emotion&#x2F;gender examples:</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#instructions"><span class="toc-number">2.2.1.</span> <span class="toc-text">Instructions</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#run-real-time-emotion-demo"><span class="toc-number">2.2.1.1.</span> <span class="toc-text">Run real-time emotion demo:</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#run-real-time-guided-back-prop-demo"><span class="toc-number">2.2.1.2.</span> <span class="toc-text">Run real-time guided back-prop demo:</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#make-inference-on-single-images"><span class="toc-number">2.2.1.3.</span> <span class="toc-text">Make inference on single images:</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#running-with-docker"><span class="toc-number">2.2.1.4.</span> <span class="toc-text">Running with Docker</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#to-train-previousnew-models-for-emotion-classification"><span class="toc-number">2.2.1.5.</span> <span class="toc-text">To train previous&#x2F;new models for emotion classification:</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#to-train-previousnew-models-for-gender-classification"><span class="toc-number">2.2.1.6.</span> <span class="toc-text">To train previous&#x2F;new models for gender classification:</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#fingers-detection-using-opencv-and-python"><span class="toc-number">3.</span> <span class="toc-text">Fingers-Detection-using-OpenCV-and-Python</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#environment"><span class="toc-number">3.1.</span> <span class="toc-text">Environment</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#demo-videos"><span class="toc-number">3.2.</span> <span class="toc-text">Demo Videos</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#how-to-run-it"><span class="toc-number">3.3.</span> <span class="toc-text">How to run it?</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#process"><span class="toc-number">3.4.</span> <span class="toc-text">Process</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#capture-original-image"><span class="toc-number">3.4.1.</span> <span class="toc-text">Capture original image</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#capture-background-model-background-subtraction"><span class="toc-number">3.4.2.</span> <span class="toc-text">Capture background model &amp; Background subtraction</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#gaussian-blur-threshold"><span class="toc-number">3.4.3.</span> <span class="toc-text">Gaussian blur &amp; Threshold</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#contour-hull-convexity"><span class="toc-number">3.4.4.</span> <span class="toc-text">Contour &amp; Hull &amp; Convexity</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#references-tutorials"><span class="toc-number">3.5.</span> <span class="toc-text">References &amp; Tutorials</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#kr1s77flask-video-streaming-recorder"><span class="toc-number">4.</span> <span class="toc-text">Kr1s77&#x2F;flask-video-streaming-recorder</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#installing"><span class="toc-number">4.1.</span> <span class="toc-text">Installing</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#first-you-should-install-python3x-on-your-raspberry-pi"><span class="toc-number">4.1.1.</span> <span class="toc-text">🐍First you should install Python3.x on your Raspberry Pi</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#next-install-the-module"><span class="toc-number">4.1.2.</span> <span class="toc-text">Next install the module</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#running-the-tests"><span class="toc-number">4.2.</span> <span class="toc-text">Running the tests</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#author"><span class="toc-number">4.3.</span> <span class="toc-text">Author</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#acknowledgments"><span class="toc-number">4.4.</span> <span class="toc-text">Acknowledgments</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#nuno-fariatiler"><span class="toc-number">5.</span> <span class="toc-text">nuno-faria&#x2F;tiler</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#about"><span class="toc-number">5.1.</span> <span class="toc-text">About</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#installation"><span class="toc-number">5.2.</span> <span class="toc-text">Installation</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#usage"><span class="toc-number">5.3.</span> <span class="toc-text">Usage</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#configuration"><span class="toc-number">5.4.</span> <span class="toc-text">Configuration</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#gen_tilespy"><span class="toc-number">5.4.1.</span> <span class="toc-text">gen_tiles.py</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#tilerpy"><span class="toc-number">5.4.2.</span> <span class="toc-text">tiler.py</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#examples"><span class="toc-number">5.5.</span> <span class="toc-text">Examples</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#circles"><span class="toc-number">5.5.1.</span> <span class="toc-text">Circles</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#various-sizes"><span class="toc-number">5.5.1.1.</span> <span class="toc-text">Various sizes</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#fixed"><span class="toc-number">5.5.1.2.</span> <span class="toc-text">Fixed</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#paper-clips"><span class="toc-number">5.5.2.</span> <span class="toc-text">Paper clips</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#cross-stitch-times"><span class="toc-number">5.5.3.</span> <span class="toc-text">Cross stitch (times)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#hearts"><span class="toc-number">5.5.4.</span> <span class="toc-text">Hearts</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#legos"><span class="toc-number">5.5.5.</span> <span class="toc-text">Legos</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#minecraft-blocks"><span class="toc-number">5.5.6.</span> <span class="toc-text">Minecraft blocks</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#stripes-lines"><span class="toc-number">5.5.7.</span> <span class="toc-text">Stripes (lines)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#at"><span class="toc-number">5.5.8.</span> <span class="toc-text">At</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#hironsanbosssensor"><span class="toc-number">6.</span> <span class="toc-text">Hironsan&#x2F;BossSensor</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#bosssensor"><span class="toc-number">6.1.</span> <span class="toc-text">BossSensor</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#demo"><span class="toc-number">6.1.1.</span> <span class="toc-text">Demo</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#requirements"><span class="toc-number">6.1.2.</span> <span class="toc-text">Requirements</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#usage-2"><span class="toc-number">6.1.3.</span> <span class="toc-text">Usage</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#install"><span class="toc-number">6.1.4.</span> <span class="toc-text">Install</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#licence"><span class="toc-number">6.1.5.</span> <span class="toc-text">Licence</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#author-2"><span class="toc-number">6.1.6.</span> <span class="toc-text">Author</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#vipstonefaceai"><span class="toc-number">7.</span> <span class="toc-text">vipstone&#x2F;faceai</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8A%9F%E8%83%BD"><span class="toc-number">7.1.</span> <span class="toc-text">功能</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83"><span class="toc-number">7.2.</span> <span class="toc-text">开发环境</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%99%E7%A8%8B"><span class="toc-number">7.3.</span> <span class="toc-text">教程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%B6%E4%BB%96%E6%95%99%E7%A8%8B"><span class="toc-number">7.4.</span> <span class="toc-text">其他教程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8A%9F%E8%83%BD%E9%A2%84%E8%A7%88"><span class="toc-number">7.5.</span> <span class="toc-text">功能预览</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8A%80%E6%9C%AF%E6%96%B9%E6%A1%88"><span class="toc-number">7.6.</span> <span class="toc-text">技术方案</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#todo"><span class="toc-number">7.6.1.</span> <span class="toc-text">TODO</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#youyuge34anime-inpainting"><span class="toc-number">8.</span> <span class="toc-text">youyuge34&#x2F;Anime-InPainting</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%87%8D%E8%A6%81"><span class="toc-number">8.1.</span> <span class="toc-text">重要</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AE%80%E4%BB%8B"><span class="toc-number">8.2.</span> <span class="toc-text">简介</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9F%BA%E7%A1%80%E7%8E%AF%E5%A2%83"><span class="toc-number">8.3.</span> <span class="toc-text">基础环境</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AC%AC%E4%B8%89%E6%96%B9%E5%BA%93%E5%AE%89%E8%A3%85"><span class="toc-number">8.4.</span> <span class="toc-text">第三方库安装</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BF%90%E8%A1%8Ctool"><span class="toc-number">8.5.</span> <span class="toc-text">运行Tool</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%BB%98%E8%AE%A4tool"><span class="toc-number">8.5.1.</span> <span class="toc-text">默认Tool:</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B8%A6edge%E7%BC%96%E8%BE%91%E7%AA%97%E5%8F%A3%E7%9A%84tool"><span class="toc-number">8.5.2.</span> <span class="toc-text">带Edge编辑窗口的Tool:</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%91%BD%E4%BB%A4%E8%A1%8C%E5%8F%82%E6%95%B0%E5%B8%AE%E5%8A%A9"><span class="toc-number">8.5.3.</span> <span class="toc-text">命令行参数帮助</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#tool%E6%93%8D%E4%BD%9C%E6%8C%87%E5%8D%97"><span class="toc-number">8.6.</span> <span class="toc-text">Tool操作指南</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%AD%E7%BB%83%E6%8C%87%E5%8D%97"><span class="toc-number">8.7.</span> <span class="toc-text">训练指南</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#feature-matching%E7%89%B9%E5%BE%81%E5%8C%B9%E9%85%8D"><span class="toc-number">8.8.</span> <span class="toc-text">Feature Matching(特征匹配)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#inpainting%E5%9B%BE%E7%89%87%E4%BF%AE%E5%A4%8D"><span class="toc-number">8.9.</span> <span class="toc-text">Inpainting(图片修复)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#todo-2"><span class="toc-number">8.10.</span> <span class="toc-text">Todo</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#license"><span class="toc-number">8.10.1.</span> <span class="toc-text">License</span></a></li></ol></li></ol></li></ol></div></div></div><div class="card-widget card-recent-post"><div class="card-content"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/post/concurrent-phaser.html" title="并发编程 - Phaser"><img data-lazy-src="https://cdn.jsdelivr.net/gh/hvnobug/assets/blog/album/original-anime/58.png" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="并发编程 - Phaser"></a><div class="content"><a class="title" href="/post/concurrent-phaser.html" title="并发编程 - Phaser">并发编程 - Phaser</a><time datetime="2021-04-07T14:13:12.000Z" title="发表于 2021-04-07 22:13:12">2021-04-07</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/post/concurrent-semaphore.html" title="并发编程 - Semaphore"><img data-lazy-src="https://cdn.jsdelivr.net/gh/hvnobug/assets/blog/album/original-anime/57.png" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="并发编程 - Semaphore"></a><div class="content"><a class="title" href="/post/concurrent-semaphore.html" title="并发编程 - Semaphore">并发编程 - Semaphore</a><time datetime="2021-04-03T05:33:27.000Z" title="发表于 2021-04-03 13:33:27">2021-04-03</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/post/concurrent-cyclicbarrier.html" title="并发编程 - CyclicBarrier"><img data-lazy-src="https://cdn.jsdelivr.net/gh/hvnobug/assets/blog/album/original-anime/56.png" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="并发编程 - CyclicBarrier"></a><div class="content"><a class="title" href="/post/concurrent-cyclicbarrier.html" title="并发编程 - CyclicBarrier">并发编程 - CyclicBarrier</a><time datetime="2021-03-27T02:23:57.000Z" title="发表于 2021-03-27 10:23:57">2021-03-27</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/post/concurrent-countdownlatch.html" title="并发编程 - CountDownLatch"><img data-lazy-src="https://cdn.jsdelivr.net/gh/hvnobug/assets/blog/album/original-anime/54.png" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="并发编程 - CountDownLatch"></a><div class="content"><a class="title" href="/post/concurrent-countdownlatch.html" title="并发编程 - CountDownLatch">并发编程 - CountDownLatch</a><time datetime="2021-03-20T12:13:12.000Z" title="发表于 2021-03-20 20:13:12">2021-03-20</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/post/concurrent-reentrantreadwritelock.html" title="并发编程 - ReentrantReadWriteLock"><img data-lazy-src="https://cdn.jsdelivr.net/gh/hvnobug/assets/blog/album/original-anime/54.png" onerror='this.onerror=null,this.src="/img/404.jpg"' alt="并发编程 - ReentrantReadWriteLock"></a><div class="content"><a class="title" href="/post/concurrent-reentrantreadwritelock.html" title="并发编程 - ReentrantReadWriteLock">并发编程 - ReentrantReadWriteLock</a><time datetime="2021-03-12T05:21:53.000Z" title="发表于 2021-03-12 13:21:53">2021-03-12</time></div></div></div></div></div></div></div></main><footer id="footer" style="background-image:url(https://cdn.jsdelivr.net/gh/hvnobug/assets/blog/album/original-anime/0.png)"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2021 By Emil</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="chat_btn" type="button" title="rightside.chat_btn"><i class="fas fa-sms"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><div class="search-dialog__title" id="local-search-title">本地搜索</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"></div></div></div><hr><div id="local-search-results"><div id="local-hits"></div><div id="local-stats"><div class="local-search-stats__hr" id="hr"><span>由</span> <a target="_blank" rel="noopener" href="https://github.com/wzpan/hexo-generator-search" style="color:#49b1f5">hexo-generator-search</a> <span>提供支持</span></div></div></div><span class="search-close-button"><i class="fas fa-times"></i></span></div><div id="search-mask"></div></div><div><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module" defer></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><script src="/js/search/local-search.js"></script><script>var preloader = {
  endLoading: () => {
    document.body.style.overflow = 'auto';
    document.getElementById('loading-box').classList.add("loaded")
  },
  initLoading: () => {
    document.body.style.overflow = '';
    document.getElementById('loading-box').classList.remove("loaded")

  }
}
window.addEventListener('load',()=> {preloader.endLoading()})</script><div class="js-pjax"><script>function loadValine () {
  function initValine () {
    let initData = {
      el: '#vcomment',
      appId: 'wN7GK2Jgd6fz8so4U85XeUxl-9Nh9j0Va',
      appKey: 'JRpha8sPFNqXkv1a0HNIIQFY',
      placeholder: '说点什么吧 ...!',
      avatar: 'monsterid',
      meta: 'nick,mail,link'.split(','),
      pageSize: '10',
      lang: 'zh-CN',
      recordIP: true,
      serverURLs: '',
      emojiCDN: '',
      emojiMaps: "",
      enableQQ: true,
      path: window.location.pathname,
    }

    if (true) { 
      initData.requiredFields= ('nick,mail'.split(','))
    }
    
    if (false) {
      const otherData = false
      initData = Object.assign({}, initData, otherData)
    }
    
    const valine = new Valine(initData)
  }

  if (typeof Valine === 'function') initValine() 
  else $.getScript('https://cdn.jsdelivr.net/npm/valine/dist/Valine.min.js', initValine)
}

if ('Valine' === 'Valine' || !false) {
  if (false) btf.loadComment(document.querySelector('#vcomment'),loadValine)
  else setTimeout(() => loadValine(), 0)
} else {
  function loadOtherComment () {
    loadValine()
  }
}</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><div class="app-refresh" id="app-refresh"><div class="app-refresh-wrap"><label>✨ 网站已更新最新版本 👉</label> <a href="javascript:void(0)" onclick="location.reload()">點擊刷新</a></div></div><script>function showNotification(){if(GLOBAL_CONFIG.Snackbar){var t="light"===document.documentElement.getAttribute("data-theme")?GLOBAL_CONFIG.Snackbar.bgLight:GLOBAL_CONFIG.Snackbar.bgDark,e=GLOBAL_CONFIG.Snackbar.position;Snackbar.show({text:"已更新最新版本",backgroundColor:t,duration:5e5,pos:e,actionText:"點擊刷新",actionTextColor:"#fff",onActionClick:function(t){location.reload()}})}else{var o=`top: 0; background: ${"light"===document.documentElement.getAttribute("data-theme")?"#49b1f5":"#1f1f1f"};`;document.getElementById("app-refresh").style.cssText=o}}"serviceWorker"in navigator&&(navigator.serviceWorker.controller&&navigator.serviceWorker.addEventListener("controllerchange",function(){showNotification()}),window.addEventListener("load",function(){navigator.serviceWorker.register("/sw.js")}));</script><script src="//code.tidio.co/aksnqalq4y8zibuahby7nqeilrtcb1oi.js" async></script><script>function onTidioChatApiReady() {
  window.tidioChatApi.hide();
  window.tidioChatApi.on("close", function() {
    window.tidioChatApi.hide();
  });
}
if (window.tidioChatApi) {
  window.tidioChatApi.on("ready", onTidioChatApiReady);
} else {
  document.addEventListener("tidioChat-ready", onTidioChatApiReady);
}

var chatBtnFn = () => {
  document.getElementById("chat_btn").addEventListener("click", function(){
    window.tidioChatApi.show();
    window.tidioChatApi.open();
  });
}
chatBtnFn()</script></div><link href="//unpkg.com/aplayer/dist/APlayer.min.css" rel="stylesheet"><script src="//cdn.jsdelivr.net/npm/hls.js@latest"></script><script src="//unpkg.com/aplayer/dist/APlayer.min.js"></script><script src="/assets/aplayer.js" type="text/javascript"></script><script type="text/javascript">const $title = $('.bg-cover .title');
    if ($title.length > 0) {
        $.ajax({
            url: 'https://sdk.jinrishici.com/v2/browser/jinrishici.js',
            dataType: "script",
            cache: true,
            async: false,
            success: function () {
                jinrishici.load(function (result) {
                    // 自己的处理逻辑
                    const {status, data} = result;
                    if (status === 'success') {
                        $title.css('font-size', '3rem');
                        $title.html(data.origin.title + '<span style="font-size:2rem;margin-left:1rem;">' + data.origin.author + '-' + data.origin['dynasty'] + '</span>');
                        typed.strings = data.origin.content.slice(0, 2);
                    }
                });
            }
        });
    }</script><div class="app-refresh" id="app-refresh"><div class="app-refresh-wrap"><label>✨ 网站已更新最新版本 👉</label> <a href="javascript:void(0)" onclick="location.reload()">點擊刷新</a></div></div><script>function showNotification(){var t,e,o;GLOBAL_CONFIG.Snackbar?(t="light"===document.documentElement.getAttribute("data-theme")?GLOBAL_CONFIG.Snackbar.bgLight:GLOBAL_CONFIG.Snackbar.bgDark,e=GLOBAL_CONFIG.Snackbar.position,Snackbar.show({text:"已更新最新版本",backgroundColor:t,duration:5e5,pos:e,actionText:"点击刷新",actionTextColor:"#fff",onActionClick:function(t){location.reload()}})):(o="top: 0; background: "+("light"===document.documentElement.getAttribute("data-theme")?"#49b1f5":"#1f1f1f")+";",document.getElementById("app-refresh").style.cssText=o)}"serviceWorker"in navigator&&(navigator.serviceWorker.controller&&navigator.serviceWorker.addEventListener("controllerchange",function(){showNotification()}),window.addEventListener("load",function(){navigator.serviceWorker.register("/sw.js")}))</script><script src="//cdn.jsdelivr.net/npm/js-base64/base64.min.js"></script><script>const hasAttr = (e,a) => a.some(_=> e.attr(_)!==undefined);
        $('a').each(function() {
          const $this = $(this);
          if(hasAttr($this,["data-fancybox","ignore-external-link"])) return;
          const href = $this.attr('href');
          if (href && href.match('^((http|https|thunder|qqdl|ed2k|Flashget|qbrowser|ftp|rtsp|mms)://)')) {
            const strs = href.split('/');
            if (strs.length >= 3) {
                const host = strs[2];
                if (host !== '' || window.location.host) {
                    $this.attr('href', '/go.html?url='+Base64.encode(href)+'').attr('rel', 'external nofollow noopener noreferrer');
                    if (true) {
                        $this.attr('target', '_blank');
                    }
                }
            }
          }
        });</script></body></html>